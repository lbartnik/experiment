"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

// Generated by CoffeeScript 2.0.3
(function () {
  var Log;

  window.utils = {};

  window.utils.isShiny = function () {
    return (typeof HTMLWidgets === "undefined" ? "undefined" : _typeof(HTMLWidgets)) === !'undefined' && HTMLWidgets.shinyMode;
  };

  // returns:
  //   - the embedded image, if contents present
  //   - the image from link, if can be found
  //   - a grey 30x30 png, if nothing else works
  window.utils.plotHref = function (step) {
    var from_id;
    if (step.contents) {
      return "data:image/png;base64," + step.contents;
    }
    from_id = $("#plots-" + step.id + "-attachment").attr("href");
    if (from_id) {
      return from_id;
    }
    return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAACXBIWXMAAAsTAAALEwEAmpwY\nAAAAB3RJTUUH4gEMEg8VFQkJGwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJ\nTVBkLmUHAAAAKUlEQVRIx+3MMREAAAgEILV/mI9oChcPAtBJ6sbUGbVarVar1Wr1/3oBRm8C\nTEfLR0EAAAAASUVORK5CYII=";
  };

  // --- simple logger ----------------------------------------------------
  Log = function Log() {
    var callerName, enabled, log, showMessage;
    enabled = false;
    callerName = function callerName() {
      var re, res, st;
      re = /([^(]+)@|at ([^(]+) \(/gm;
      st = new Error().stack;
      re.exec(st); // skip 1st line
      re.exec(st); // skip 2nd line
      re.exec(st); // skip 3rd line
      res = re.exec(st);
      if (!res) {
        return "unknown";
      }
      return res[1] || res[2];
    };
    showMessage = function showMessage(level, message) {
      var caller;
      if (!enabled) {
        return;
      }
      caller = callerName();
      return console.log(level + " " + caller + ": " + message);
    };
    log = function log() {};
    log.debug = function (message) {
      return showMessage("DEBUG", message);
    };
    log.info = function (message) {
      return showMessage("INFO ", message);
    };
    log.enable = function (onoff) {
      return enabled = onoff;
    };
    return log;
  };

  window.log = Log();
}).call(undefined);